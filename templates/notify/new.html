{% extends 'base.html' %}
{% load static %}

{% block sitio %}
    <li class="breadcrumb-item"><a href="{% url 'notify:inbox' %}">Nuevo</a></li>
{% endblock %}

{% block content %}
{% csrf_token %}
<!-- begin row -->

<h3>Notificaciones</h3><br>



<div class="row">
    <div class="col-md-12">
        <div class="panel panel-inverse" style="overflow-y: auto;">
            <div class="panel-body pet-padding-none" >
                <div class="col-pet-18" >
                    <div class="col-head-100" style="text-align: center;">
                        <a href="email_compose.html" class="btn btn-dark ps-40px pe-40px btn-sm">
                            Enviar
                        </a>
                    </div>
                    <div class="col-headfree-100" >
                        <div class="nav-title"><b>FOLDERS</b></div>
                        <div>
                            <ul class="nav nav-inbox">
                                <li class="active"><a href="{% url 'notify:inbox' %}"><i class="fa fa-hdd fa-lg fa-fw me-2"></i> Inbox <span id="badgeinbox" class="badge fs-10px rounded-pill ms-auto fw-bolder pt-4px pb-5px px-8px badge-red">52</span></a></li>
                                <li><a href="{% url 'notify:important' %}"><i class="fa fa-flag fa-lg fa-fw me-2"></i> Importante</a></li>
                                <li><a href="{% url 'notify:send' %}"><i class="fa fa-envelope fa-lg fa-fw me-2"></i> Enviado</a></li>
                                <li><a href="{% url 'notify:trash' %}"><i class="fa fa-trash-alt fa-lg fa-fw me-2"></i> Basura</a></li>
                            </ul>
                        </div>
                        <div class="nav-title"><b>ETIQUETAS</b></div>
                        <div>
                            <ul class="nav nav-inbox">
                                {% for q in etiqueta %}
                                    <li><a href="javascript:;" data-id="{{ q.id }}"><i class="fa fa-fw fa-lg fs-12px me-2 fa-circle" style="color:{{ q.color }}"></i>{{ q.name }}</a></li>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="block" style="height: 400px;"></div>
                    </div>
                </div>
                <div class="col-pet-82" style="height: 100% !important;">
                    <div class="col-head-100">
                        <div class="btn-group me-2"></div>
                        <div class="btn-group me-2"></div>
                    </div>
                    <div class="col-headfree-100 transparent m-15 calc-m-30 border-bottom-hr" style="height: 100% !important;">
                        <h3>
                            {% if notify.title %}
                                <h4>{{ notify.title }}</h4>
                                <div class="block">
                                    {% for b in notify.badge %}
                                        {% if b.name == 'Importante' %}
                                            <span class="bbadge" style="background:{{ b.color }};width: 85px;"><i class="fa fa-flag fa-xs fa-fw me-2"></i>{{ b.name }}</span>
                                        {% elif b.name == 'Visto' %}
                                            <span class="bbadge" style="background:{{ b.color }};"><i class="fa fa-eye fa-xs fa-fw me-2"></i>{{ b.name }}</span>
                                        {% elif b.name == 'Basurero' %}
                                            <span class="bbadge" style="background:{{ b.color }};width: 75px;"><i class="fa fa-trash fa-xs fa-fw me-2"></i>{{ b.name }}</span>
                                        {% elif b.name == 'Correo archivado, no visible' %}
                                            <span class="bbadge" style="color:{{ b.color }};width: 180px;border:1px solid #ff0000;"><i class="fa fa-window-close fa-xs fa-fw me-2"></i>{{ b.name }}</span>
                                        {% else %}
                                            <span class="bbadge" style="background:{{ b.color }};">{{ b.name }}</span>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            {% else %}
                                <h4>Bootstrap v5.0 is coming soon</h4>
                            {% endif %}
                        </h3>
                        <div class="block">
                            <div class="block" style="width: 100px;">
                                {% if notify.img %}
                                     <img src="/media/{{ notify.img }}" />
                                {% else %}
                                    <img src="/media/notify/pictures/notify.png" />
                                {% endif %}
                            </div>
                            <div class="block" style="width: 400px;">
                                <div class="block" style="width: 100%;padding: 0px;">
                                    {% if notify.from %}
                                         <h6 class="h6">{{ notify.from }}</h6>
                                    {% else %}
                                        <h6 class="h6">from support@wrapbootstrap.com</h6>
                                    {% endif %}
                                </div>
                                <div class="block" style="width: 100%;padding: 0px;">
                                    {% if notify.date %}
                                        <i class="fas fa-clock fa-lg" style="margin-right: 4px;"></i><span style="font-size: 12px;">{{ notify.date }}</span>
                                    {% else %}
                                        <i class="fas fa-clock fa-lg" style="margin-right: 4px;"></i><span style="font-size: 12px;">Today, 8:30 AM</span>
                                    {% endif %}
                                </div>
                                <div class="block" style="width: 100%;">
                                    {% if notify.to %}
                                        <span style="font-size: 12px;">{{ notify.to }}</span>
                                    {% else %}
                                        <span style="font-size: 12px;">To: nguoksiong@live.co.uk</span>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-headfree-100 transparent m-15 calc-m-30 border-bottom-hr hr-transparent" style="height: 100% !important;">
                        {% if notify.message %}
                            <p>{{ notify.message }}</p>
                        {% else %}
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras vel auctor nisi, vel auctor orci.
                            Aenean in pretium odio, ut lacinia tellus. Nam sed sem ac enim porttitor vestibulum vitae at erat.

                            Curabitur auctor non orci a molestie. Nunc non justo quis orci viverra pretium id ut est.
                            Nullam vitae dolor id enim consequat fermentum. Ut vel nibh tellus.
                            Duis finibus ante et augue fringilla, vitae scelerisque tortor pretium.
                            Phasellus quis eros erat. Nam sed justo libero.

                            Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.
                            Sed tempus dapibus libero ac commodo.



                            Best Regards,
                            Sean.

                            Information Technology Department,
                            Senior Front End Designer</p>
                        {% endif %}
                    </div>
                    <div class="flotant-b-rigth">Ultima modificación : {{ notify.modified }}</div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- end row -->
<!-- begin row -->

{% endblock %}

{% block style %}
    <style>
    .btn-name-mdl-create{
        font-size: 14px;
    }
    .chip-user{
        width: 100%;
        text-align: center;
    }
    .bold{
        font-weight: bold !important;
        color:#0d3349;
    }
    .bbadge{
        float:left;
        width: 60px;
        text-align: center;
        margin-right:4px;
        border-radius:4px;
        font-size:10px;
        padding:2px 5px;
        color:#fff;
    }
    </style>
{% endblock %}

{% block script %}
<script>
    $(document).ready(function (){
        const csrfmiddlewaretoken = '{{ csrf_token }}';
        $('#btn-notify--important').click(function (){
            id = $(this).attr('data-id');
            $.post("{% url 'notify:post_change_important' %}",{csrfmiddlewaretoken, 'id':id}).done(function(data){
                if(data.error){
                    Swal.fire({
                      title: 'Upps !!',
                      text: data.msj,
                      icon: 'error',
                    }).then(function (){
                        location.reload();
                    });
                }else{
                    Swal.fire({
                      title: 'Genial !!',
                      text: data.msj,
                      icon: 'success',
                    }).then(function (){
                        location.reload();
                    });
                }
            })
        });
        $('#btn-notify--trash').click(function (){
            id = $(this).attr('data-id');
            $.post("{% url 'notify:post_change_trash' %}",{csrfmiddlewaretoken, 'id':id}).done(function(data){
                if(data.error){
                    Swal.fire({
                      title: 'Upps !!',
                      text: data.msj,
                      icon: 'error',
                    }).then(function (){
                        location.reload();
                    });
                }else{
                    Swal.fire({
                      title: 'Genial !!',
                      text: data.msj,
                      icon: 'success',
                    }).then(function (){
                        location.reload();
                    });
                }
            })
        });
        $('#btn-notify--response').click(function (){
            id = $(this).attr('data-id');
            Swal.fire({
              title: "Respuesta de Notificaciones",
              text: "Este funcionamiento por el momento no esta disponible en esta versión",
              icon: "info"
            });
        });
        $('#btn-notify--archivar').click(function (){
            Swal.fire({
                title: "Quiere archivar notificación?",
                text: "Una vez hecho esto desaparce de sus vistas",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Si, Archivar",
                cancelButtonText: "Cancelar"
            }).then((result) => {
              if (result.isConfirmed) {
                  id = $(this).attr('data-id');
                  $.post("{% url 'notify:post_change_active' %}",{csrfmiddlewaretoken, 'id':id}).done(function(data){
                    if(data.error){
                        Swal.fire({
                          title: 'Upps !!',
                          text: data.msj,
                          icon: 'error',
                        }).then(function (){
                            location.reload();
                        });
                    }else{
                        Swal.fire({
                          title: 'Genial !!',
                          text: data.msj,
                          icon: 'success',
                        }).then(function (){
                            location.reload();
                        });
                    }
                });
              }
            });
        });
    })

</script>

{% endblock%}